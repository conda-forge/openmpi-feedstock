schema_version: 1

context:
  version: 4.1.6
  build: 2
  string_prefix: 'external_'
  major_minor: ${{ (version | split('.'))[:2] | join('.') }}

recipe:
  name: openmpi
  version: ${{ version }}

source:
  url: https://www.open-mpi.org/software/ompi/v${{ major_minor }}/downloads/openmpi-${{ version }}.tar.bz2
  sha256: f740994485516deb63b5311af122c265179f5328a0d857a567b85db00b11e415

build:
  number: ${{ build }}
  # this needs to be duplicated into output skips
  # until https://github.com/prefix-dev/rattler-build/issues/1918 is fixed
  skip: not linux

outputs:
  - package:
      name: openmpi
    build:
      string: ${{ string_prefix }}h${{ hash }}_${{ build }}
      
    requirements:
      run:
        - mpi 1.0.* openmpi
    tests:
      - script:
          - echo 'ok'

about:
  homepage: https://www.open-mpi.org/
  license: BSD-3-Clause
  license_family: BSD
  license_file: LICENSE
  summary: An open source Message Passing Interface implementation.
  description: |
    The Open MPI Project is an open source Message Passing Interface
    implementation that is developed and maintained by a consortium of academic,
    research, and industry partners.
  documentation: https://www.open-mpi.org/doc/
  repository: https://github.com/open-mpi/ompi

extra:
  recipe-maintainers:
    - astrofrog
    - bekozi
    - dalcinl
    - leofang
    - minrk
    - msarahan
    - ocefpaf
    - beckermr
    - j34ni
